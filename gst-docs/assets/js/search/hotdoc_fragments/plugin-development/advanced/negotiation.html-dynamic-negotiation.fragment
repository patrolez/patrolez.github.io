fragment_downloaded_cb({"url":"plugin-development/advanced/negotiation.html#dynamic-negotiation","fragment":"Dynamic negotiation\nA last negotiation method is the most complex and powerful dynamic\nnegotiation.\nLike with the transform negotiation in Transform\nnegotiation, dynamic negotiation will perform a\ntransformation on the downstream/upstream caps. Unlike the transform\nnegotiation, this transform will convert fixed caps to unfixed caps.\nThis means that the sink pad input caps can be converted into unfixed\n(multiple) formats. The source pad will have to choose a format from all\nthe possibilities. It would usually like to choose a format that\nrequires the least amount of effort to produce but it does not have to\nbe. The selection of the format should also depend on the caps that can\nbe accepted downstream (see a QUERY_CAPS function in Implementing a\nCAPS query function).\nA typical flow goes like this:\nCaps are received on the sink pad of the element.\nIf the element prefers to operate in passthrough mode, check if\ndownstream accepts the caps with the ACCEPT_CAPS query. If it does,\nwe can complete negotiation and we can operate in passthrough mode.\nCalculate the possible caps for the source pad.\nQuery the downstream peer pad for the list of possible caps.\nSelect from the downstream list the first caps that you can\ntransform to and set this as the output caps. You might have to\nfixate the caps to some reasonable defaults to construct fixed caps.\nExamples of this type of elements include:\nConverter elements such as videoconvert, audioconvert,\naudioresample, videoscale, ...\nSource elements such as audiotestsrc, videotestsrc, v4l2src,\npulsesrc, ...\nLet's look at the example of an element that can convert between\nsamplerates, so where input and output samplerate don't have to be the\nsame:\n\n\nCaps are received on the sink pad of the element.\n\n\nIf the element prefers to operate in passthrough mode, check if\ndownstream accepts the caps with the ACCEPT_CAPS query. If it does,\nwe can complete negotiation and we can operate in passthrough mode.\n\n\nCalculate the possible caps for the source pad.\n\n\nQuery the downstream peer pad for the list of possible caps.\n\n\nSelect from the downstream list the first caps that you can\ntransform to and set this as the output caps. You might have to\nfixate the caps to some reasonable defaults to construct fixed caps.\n\n\n\n\nConverter elements such as videoconvert, audioconvert,\naudioresample, videoscale, ...\n\n\nSource elements such as audiotestsrc, videotestsrc, v4l2src,\npulsesrc, ...\n\n\n"});