fragment_downloaded_cb({"url":"tutorials/android/a-running-pipeline.html#set_ui_message","fragment":"set_ui_message()\nThis is the other method (besides check_initialization_complete())\nthat needs to call a Java function from a thread which never received an\nJNIEnv pointer directly. Notice how all the complexities of attaching\nthe thread to the JavaVM and storing the JNI environment in the TLS are\nhidden in the simple call to get_jni_env().\nThe desired message (received in\nASCII, or modified\nUTF8), is\nconverted to UTF16 as required by\nJava using the\nNewStringUTF()\nJNI call.\nThe setMessage() Java method is called via the JNI\nCallVoidMethod()\nusing the global reference to the class we are keeping in\nCustomData (data->app) and the set_message_method_id we cached in\ngst_native_class_init().\nWe check for exceptions with the JNI\nExceptionCheck()\nmethod and free the UTF16 message with\nDeleteLocalRef().\n"});