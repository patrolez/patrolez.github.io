fragment_downloaded_cb({"url":"audio/gstaudioencoder.html#shutdown-phase","fragment":"Shutdown phase\nSubclass is responsible for providing pad template caps for\nsource and sink pads. The pads need to be named \"sink\" and \"src\". It also\nneeds to set the fixed caps on srcpad, when the format is ensured.  This\nis typically when base class calls subclass' set_format function, though\nit might be delayed until calling gst_audio_encoder_finish_frame.\nIn summary, above process should have subclass concentrating on\ncodec data processing while leaving other matters to base class,\nsuch as most notably timestamp handling.  While it may exert more control\nin this area (see e.g. pre_push), it is very much not recommended.\nIn particular, base class will either favor tracking upstream timestamps\n(at the possible expense of jitter) or aim to arrange for a perfect stream of\noutput timestamps, depending on perfect-timestamp.\nHowever, in the latter case, the input may not be so perfect or ideal, which\nis handled as follows.  An input timestamp is compared with the expected\ntimestamp as dictated by input sample stream and if the deviation is less\nthan tolerance, the deviation is discarded.\nOtherwise, it is considered a discontuinity and subsequent output timestamp\nis resynced to the new position after performing configured discontinuity\nprocessing.  In the non-perfect-timestamp case, an upstream variation\nexceeding tolerance only leads to marking DISCONT on subsequent outgoing\n(while timestamps are adjusted to upstream regardless of variation).\nWhile DISCONT is also marked in the perfect-timestamp case, this one\noptionally (see hard-resync)\nperforms some additional steps, such as clipping of (early) input samples\nor draining all currently remaining input data, depending on the direction\nof the discontuinity.\nIf perfect timestamps are arranged, it is also possible to request baseclass\n(usually set by subclass) to provide additional buffer metadata (in OFFSET\nand OFFSET_END) fields according to granule defined semantics currently\nneeded by oggmux.  Specifically, OFFSET is set to granulepos (= sample count\nincluding buffer) and OFFSET_END to corresponding timestamp (as determined\nby same sample count and sample rate).\nThings that subclass need to take care of:\n\nGstAudioEncoder class calls stop to inform the subclass that data\nparsing will be stopped.\n\n\nProvide pad templates\nSet source pad caps when appropriate\nInform base class of buffer processing needs using context's\nframe_samples and frame_bytes.\nSet user-configurable properties to sane defaults for format and\nimplementing codec at hand, e.g. those controlling timestamp behaviour\nand discontinuity processing.\nAccept data in handle_frame and provide encoded results to\ngst_audio_encoder_finish_frame.\n\n"});